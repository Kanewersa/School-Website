$('#loader').modal("hide");
$('#preview-body').html('<%= escape_javascript( render :partial => 'shared/preview', :layout => 'shared/application', locals: { resource: @main_tab, preview: true} ) %>');
var source = $('input[name ="main_tab[image]"]');
if(source[0].files.length > 0)
{
    var getImagePath = URL.createObjectURL(source[0].files[0]);
    $('#jumbo').css({"background": 'url(' + getImagePath + ') no-repeat', "background-position-y": '45%',
        "background-position-x": "center", "background-size": "cover"});
} else
{
    $('#jumbo').css({
        "background": 'url(' + '<%= url_for(@main_tab.image) if @main_tab.image.attached? %>' + ') no-repeat',
        "background-position-y": '45%',
        "background-position-x": "center",
        "background-size": "cover"
    });
}

$('#preview-modal').modal('show');
